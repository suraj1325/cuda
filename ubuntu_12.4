#!/bin/bash

# Download CUDA keyring
wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2204/x86_64/cuda-keyring_1.1-1_all.deb
if [ $? -eq 0 ]; then
    echo "CUDA keyring downloaded successfully."
else
    echo "Failed to download CUDA keyring."
    exit 1
fi

# Install CUDA keyring
sudo dpkg -i cuda-keyring_1.1-1_all.deb
if [ $? -eq 0 ]; then
    echo "CUDA keyring installed successfully."
else
    echo "Failed to install CUDA keyring."
    exit 1
fi

# Update apt repository
sudo apt-get update
if [ $? -eq 0 ]; then
    echo "Apt repository updated successfully."
else
    echo "Failed to update apt repository."
    exit 1
fi

# Install CUDA Toolkit
sudo apt-get -y install cuda-toolkit-12-4
if [ $? -eq 0 ]; then
    echo "CUDA Toolkit installed successfully."
else
    echo "Failed to install CUDA Toolkit."
    exit 1
fi

# Install CUDA drivers
sudo apt-get install -y cuda-drivers
if [ $? -eq 0 ]; then
    echo "CUDA drivers installed successfully."
else
    echo "Failed to install CUDA drivers."
    exit 1
fi

# Install NVIDIA driver 550 open
sudo apt-get install -y nvidia-driver-550-open
if [ $? -eq 0 ]; then
    echo "NVIDIA driver 550 open installed successfully."
else
    echo "Failed to install NVIDIA driver 550 open."
    exit 1
fi

# Install CUDA drivers 550
sudo apt-get install -y cuda-drivers-550
if [ $? -eq 0 ]; then
    echo "CUDA drivers 550 installed successfully."
else
    echo "Failed to install CUDA drivers 550."
    exit 1
fi

echo "All commands executed successfully."
